<!DOCTYPE html> {% load leaflet_tags %} {% load static %}
<html>

<head>
    <meta charset="utf-8" />

    <title>GeoDjango</title>
    <style type="text/css">
        .leaflet-container {
            height: 700px;
            width: 80%;
        }
    </style>
    {% leaflet_js %}
    {% leaflet_css %}
    <script src="{% static 'dist/leaflet.ajax.js' %}" type="text/javascript"></script>
    <script src="{% static 'dist/leaflet.groupedlayercontrol.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'dist/leaflet.groupedlayercontrol.min.css' %}" type="text/javascript"></script>
</head>

<body>
    <div class="page-header">
        <h1>GeoDjango</h1>
    </div>

    <script type="text/javascript">

        function op_layers(map, options) {

            var osm = 'http://{s}.tile.openstreetmap.org/{z}{y}{x}.png';

            var dataset = new L.GeoJSON.AJAX("{% url 'data' %}");
            dataset.addTo(map);


            var baseLayers = {
                "OpenStreetMap": osm
            };        

            var groupeOverlays ={
                "Layers": {
                    "RINF": dataset  
                }
            };               
            L.control.groupedLayers(baseLayers,groupeOverlays).addTo(map);
        }
               
    </script> {% leaflet_map "main" callback="window.op_layers" %}
    {% block content %}
    
    {% endblock %}
</body>

</html>